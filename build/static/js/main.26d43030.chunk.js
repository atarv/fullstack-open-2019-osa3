(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},18:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),r=n(11),c=n.n(r),i=(n(18),n(2)),o=n(3),l=n.n(o),m="/api/persons",s=function(){return l.a.get("".concat(m)).then(function(e){return e.data})},f=function(e){return l.a.post("".concat(m),e).then(function(e){return e.data})},d=function(e){return l.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},h=function(e){return l.a.put("".concat(m,"/").concat(e.id),e).then(function(e){return e.data})},p=(n(38),function(e){var t=e.message;if(!t)return null;var n=t.type?t.type:"success";return u.a.createElement("div",{className:n},t.text)}),v=function(e){var t=e.handleNimi,n=e.handleNumero,a=e.handleSubmit;return u.a.createElement("form",{onSubmit:a},u.a.createElement("div",null,"nimi: ",u.a.createElement("input",{onChange:t})),u.a.createElement("div",null,"numero: ",u.a.createElement("input",{onChange:n})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},E=function(e){var t=e.filterNames;return u.a.createElement("div",null,"Rajaa n\xe4ytett\xe4v\xe4 ",u.a.createElement("input",{onChange:t}))},b=function(e){var t=e.listNames;return u.a.createElement("ul",null,t())},j=function(e){var t=e.person,n=e.handleDelete;return u.a.createElement("li",{key:t.id},t.name," ",t.number,u.a.createElement("button",{key:"b"+t.id,onClick:function(){return n(t)}},"poista"))},y=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(i.a)(c,2),l=o[0],m=o[1],y=Object(a.useState)(""),w=Object(i.a)(y,2),g=w[0],O=w[1],k=Object(a.useState)(""),N=Object(i.a)(k,2),x=N[0],S=N[1],C=Object(a.useState)(void 0),L=Object(i.a)(C,2),P=L[0],D=L[1],T=function(e){console.log("ennen",n),window.confirm("Poistetaanko ".concat(e.name,"?"))&&(d(e.id).then(function(){r(n.filter(function(t){return t.id!==e.id}))}).then(function(){return D({text:"Poistettiin ".concat(e.name),type:"success"})}).catch(function(){D({text:"".concat(e.name," oli jo poistettu palvelimelta"),type:"error"}),r(n.filter(function(t){return t.id!==e.id}))}),setTimeout(function(){return D(null)},5e3))};return Object(a.useEffect)(function(){s().then(function(e){r(e)})},[]),u.a.createElement("div",null,u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(p,{message:P}),u.a.createElement(E,{filterNames:function(e){S(e.target.value)}}),u.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),u.a.createElement(v,{handleNimi:function(e){m(e.target.value)},handleNumero:function(e){O(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:l,number:g},a=n.find(function(e){return e.name===l});a?window.confirm("".concat(l," on jo luettelossa. Korvataanko numero uudella?"))&&(t.id=a.id,h(t).then(function(){var e=n.findIndex(function(e){return e===a}),u=n.concat();u[e]=t,r(u)}).then(function(){return D({text:"P\xe4ivitettiin henkil\xf6n ".concat(t.name," numeroksi ").concat(t.number),type:"success"})}).catch(D({text:"P\xe4ivitt\xe4minen ep\xe4onnistui",type:"error"})),setTimeout(function(){return D(null)},5e3)):(f(t).then(function(e){return r(n.concat(e))}).then(function(){return D({text:"Lis\xe4ttiin ".concat(t.name),type:"success"})}).catch(function(){return D({text:"Lis\xe4\xe4minen ep\xe4onnistui",type:"error"})}),setTimeout(function(){return D(null)},5e3))}}),u.a.createElement("h2",null,"Numerot"),u.a.createElement(b,{listNames:function(){return n.map(function(e){return e.name.toLowerCase().includes(x.toLowerCase())?u.a.createElement(j,{person:e,key:e.id,handleDelete:T}):void 0})},handleDelete:T}))};c.a.render(u.a.createElement(y,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.26d43030.chunk.js.map